<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Quick Start - laminas-mvc</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">laminas-mvc</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../intro/" class="nav-link">Introduction</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">Quick Start</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../services/" class="dropdown-item">Default Services</a>
</li>
                                    
<li>
    <a href="../routing/" class="dropdown-item">Routing</a>
</li>
                                    
<li>
    <a href="../mvc-event/" class="dropdown-item">The MVC Event</a>
</li>
                                    
<li>
    <a href="../send-response-event/" class="dropdown-item">The SendResponse Event</a>
</li>
                                    
<li>
    <a href="../controllers/" class="dropdown-item">Available Controllers</a>
</li>
                                    
<li>
    <a href="../plugins/" class="dropdown-item">Controller Plugins</a>
</li>
                                    
<li>
    <a href="../examples/" class="dropdown-item">Examples</a>
</li>
                                    
<li>
    <a href="../middleware/" class="dropdown-item">Dispatching PSR-7 Middleware</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Migration</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../migration/" class="dropdown-item">Migration Overview</a>
</li>
            
<li>
    <a href="../migration/to-v2-7/" class="dropdown-item">v2.X to v2.7</a>
</li>
            
<li>
    <a href="../migration/to-v3-0/" class="dropdown-item">v2.X to v3.0</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Cookbook <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../cookbook/automating-controller-factories/" class="dropdown-item">Automating controller factories</a>
</li>
                                    
<li>
    <a href="../cookbook/middleware-in-listeners/" class="dropdown-item">Using middleware within event listeners</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../intro/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../services/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/laminas/laminas-mvc/edit/master/docs/quick-start.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#quick-start" class="nav-link">Quick Start</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#install-the-laminas-mvc-skeleton-application" class="nav-link">Install the Laminas MVC Skeleton Application</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#create-a-new-module" class="nav-link">Create a New Module</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#update-the-module-class" class="nav-link">Update the Module Class</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#create-a-controller" class="nav-link">Create a Controller</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#create-a-view-script" class="nav-link">Create a View Script</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#view-scripts-for-module-names-with-subnamespaces" class="nav-link">View scripts for module names with subnamespaces</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#create-a-route" class="nav-link">Create a Route</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#tell-the-application-about-our-module" class="nav-link">Tell the Application About our Module</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#test-it-out" class="nav-link">Test it Out!</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="quick-start">Quick Start</h1>
<p>Now that you have basic knowledge of applications, modules, and how they are
each structured, we'll show you the easy way to get started.</p>
<h2 id="install-the-laminas-mvc-skeleton-application">Install the Laminas MVC Skeleton Application</h2>
<p>The easiest way to get started is to install the skeleton application via
Composer.</p>
<p>If you have not yet done so, <a href="https://getcomposer.org/doc/00-intro.md#installation-linux-unix-osx">install Composer</a>.</p>
<p>Once you have, use the <code>create-project</code> command to create a new application:</p>
<pre><code class="bash">$ composer create-project -sdev laminas/laminas-mvc-skeleton my-application
</code></pre>

<h2 id="create-a-new-module">Create a New Module</h2>
<p>By default, one module is provided with the <a href="https://github.com/laminas/laminas-mvc-skeleton">laminas-mvc-skeleton</a>,
named "Application". It provides a controller to handle the "home" page
of the application, the layout template, and templates for 404 and error pages.</p>
<p>Typically, you will not need to touch this other than to provide an alternate
entry page for your site and/or alternate error page.</p>
<p>Additional functionality will be provided by creating new modules.</p>
<p>To get you started with modules, we recommend using the <code>LaminasSkeletonModule</code> as
a base. Download it from here:</p>
<ul>
<li><a href="https://github.com/laminas/LaminasSkeletonModule/zipball/master">LaminasSkeletonModule zip package</a></li>
<li><a href="https://github.com/laminas/LaminasSkeletonModule/tarball/master">LaminasSkeletonModule tarball</a></li>
</ul>
<p>Deflate the package, and rename the directory "LaminasSkeletonModule" to reflect
the name of the new module you want to create; when done, move the module into
your new project's <code>module/</code> directory.</p>
<p>At this point, it's time to create some functionality.</p>
<h2 id="update-the-module-class">Update the Module Class</h2>
<p>Let's update the <code>Module</code> class. We'll want to make sure the namespace is correct,
configuration is enabled and returned, and that we setup autoloading on
initialization. Since we're actively working on this module, the class list will
be in flux; we probably want to be pretty lenient in our autoloading approach,
so let's keep it flexible by using the <code>StandardAutoloader</code>. Let's begin.</p>
<p>First, let's have <code>autoload_classmap.php</code> return an empty array:</p>
<pre><code class="php">&lt;?php
// autoload_classmap.php
return [];
</code></pre>

<p>We'll also edit our <code>config/module.config.php</code> file to read as follows:</p>
<pre><code class="php">return [
    'view_manager' =&gt; [
        'template_path_stack' =&gt; [
            '&lt;module-name&gt;' =&gt; __DIR__ . '/../view',
        ],
    ],
];
</code></pre>

<p>Fill in <code>module-name</code> with a lowercased, dash-separated version of your module
name; e.g., "LaminasUser" would become "laminas-user".</p>
<p>Next, edit the namespace declaration of the <code>Module.php</code> file. Replace the
following line:</p>
<pre><code class="php">namespace LaminasSkeletonModule;
</code></pre>

<p>with the namespace you want to use for your application.</p>
<p>Next, rename the directory <code>src/LaminasSkeletonModule</code> to <code>src/&lt;YourModuleName&gt;</code>,
and the directory <code>view/laminas-skeleton-module</code> to <code>src/&lt;your-module-name&gt;</code>.</p>
<p>At this point, you now have your module configured properly. Let's create a
controller!</p>
<h2 id="create-a-controller">Create a Controller</h2>
<p>Controllers are objects that implement <code>Laminas\Stdlib\DispatchableInterface</code>. This
means they need to implement a <code>dispatch()</code> method that takes minimally a
<code>Request</code> object as an argument.</p>
<p>In practice, though, this would mean writing logic to branch based on matched
routing within every controller. As such, we've created several base controller
classes for you to start with:</p>
<ul>
<li><code>Laminas\Mvc\Controller\AbstractActionController</code> allows routes to match an
  "action". When matched, a method named after the action will be called by the
  controller. As an example, if you had a route that returned "foo" for the
  "action" key, the "fooAction" method would be invoked.</li>
<li><code>Laminas\Mvc\Controller\AbstractRestfulController</code> introspects the <code>Request</code> to
  determine what HTTP method was used, and calls a method according to that.</li>
<li><code>GET</code> will call either the <code>getList()</code> method, or, if an "id" was matched
    during routing, the <code>get()</code> method (with that identifier value).</li>
<li><code>POST</code> will call the <code>create()</code> method, passing in the <code>$_POST</code> values.</li>
<li><code>PUT</code> expects an "id" to be matched during routing, and will call the
    <code>update()</code> method, passing in the identifier, and any data found in the raw
    post body.</li>
<li><code>DELETE</code> expects an "id" to be matched during routing, and will call the
    <code>delete()</code> method.</li>
<li><code>Laminas\Mvc\Console\Controller\AbstractConsoleController</code> extends from
  <code>AbstractActionController</code>, but provides methods for retrieving the
  <code>Laminas\Console\Adapter\AdapterInterface</code> instance, and ensuring that execution
  fails in non-console environments.</li>
</ul>
<blockquote>
<h3 id="installation-requirements">Installation Requirements</h3>
<p>For version 3, the integration component
<a href="https://docs.laminas.dev/laminas-mvc-console/">laminas-mvc-console</a> must be
installed. It can be done via Composer:</p>
<p><code>bash
composer require laminas/laminas-mvc-console</code></p>
<p>If you are not using the component installer, you will need to
<a href="https://docs.laminas.dev/laminas-mvc-console/#installation">add this component as a module</a>.</p>
</blockquote>
<p>To get started, we'll create a "hello world"-style controller, with a single
action. First, create the file <code>HelloController.php</code> in the directory
<code>src/&lt;module name&gt;/Controller</code>. Edit it in your favorite text editor or IDE,
and insert the following contents:</p>
<pre><code class="php">&lt;?php
namespace &lt;module name&gt;\Controller;

use Laminas\Mvc\Controller\AbstractActionController;
use Laminas\View\Model\ViewModel;

class HelloController extends AbstractActionController
{
    public function worldAction()
    {
        $message = $this-&gt;params()-&gt;fromQuery('message', 'foo');
        return new ViewModel(['message' =&gt; $message]);
    }
}
</code></pre>

<p>So, what are we doing here?</p>
<ul>
<li>We're creating an action controller.</li>
<li>We're defining an action, "world".</li>
<li>We're pulling a message from the query parameters (yes, this is a superbly bad
  idea in production!  Always sanitize your inputs!).</li>
<li>We're returning a <code>ViewModel</code> with an array of values to be processed later.</li>
</ul>
<p>We return a <code>ViewModel</code>. The view layer will use this when rendering the view,
pulling variables and the template name from it. By default, you can omit the
template name, and it will resolve to "lowercase-module-name/lowercase-controller-name/lowercase-action-name".
However, you can override this to specify something different by calling
<code>setTemplate()</code> on the <code>ViewModel</code> instance. Typically, templates will resolve
to files with a ".phtml" suffix in your module's <code>view</code> directory.</p>
<p>So, with that in mind, let's create a view script.</p>
<h2 id="create-a-view-script">Create a View Script</h2>
<p>Create the directory <code>view/&lt;module-name&gt;/hello</code>. Inside that directory, create a
file named <code>world.phtml</code>. Inside that, paste in the following:</p>
<pre><code class="php">&lt;h1&gt;Greetings!&lt;/h1&gt;

&lt;p&gt;You said &quot;&lt;?php echo $this-&gt;escapeHtml($message) ?&gt;&quot;.&lt;/p&gt;
</code></pre>

<p>That's it. Save the file.</p>
<blockquote>
<h3 id="escaping-output">Escaping output</h3>
<p>What is the method <code>escapeHtml()</code>? It's actually a <a href="https://docs.laminas.dev/laminas-view/helpers/intro/">view helper</a>,
and it's designed to help mitigate XSS attacks. Never trust user input; if you
are at all uncertain about the source of a given variable in your view script,
escape it using one of the provided escape view helpers depending on the type
of data you have.</p>
</blockquote>
<h2 id="view-scripts-for-module-names-with-subnamespaces">View scripts for module names with subnamespaces</h2>
<p>As per PSR-0, modules should be named following the rule: <code>&lt;Vendor Name&gt;\&lt;Namespace&gt;\*</code>.</p>
<p>Since version 3.0, the default template name resolver uses fully qualified
controller class names, stripping only the <code>\Controller\\</code> subnamespace, if
present.  For example, <code>AwesomeMe\MyModule\Controller\HelloWorldController</code>
resolves to the template name <code>awesome-me/my-module/hello-world</code> via the
following configuration:</p>
<pre><code class="php">'view_manager' =&gt; [
    'controller_map' =&gt; [
        'AwesomeMe\MyModule' =&gt; true,
    ],
],
</code></pre>

<p>(In v2 releases, the default was to strip subnamespaces, but optional mapping rules
allowed whitelisting namespaces in module configuration to enable current
resolver behavior. See the <a href="../migration/to-v3-0/#laminasmvcviewinjecttemplatelistener">migration guide</a>
for more details.)</p>
<h2 id="create-a-route">Create a Route</h2>
<p>Now that we have a controller and a view script, we need to create a route to it.</p>
<blockquote>
<h3 id="default-routing">Default routing</h3>
<p><code>LaminasSkeletonModule</code> ships with a "default route" that will likely get
you to this action. That route is defined roughly as
<code>/{module}/{controller}/{action}</code>, which means that the path
<code>/laminas-user/hello/world</code> will map to <code>LaminasUser\Controller\HelloController::worldAction()</code>
(assuming the module name were <code>LaminasUser</code>).</p>
<p>We're going to create an explicit route in this example, as
creating explicit routes is a recommended practice. The application will look for a
<code>Laminas\Router\RouteStackInterface</code> instance to setup routing. The default generated router is a
<code>Laminas\Router\Http\TreeRouteStack</code>.</p>
<p>To use the "default route" functionality, you will need to edit the shipped
routing definition in the module's <code>config/module.config.php</code>, and replace:</p>
<ul>
<li><code>/module-specific-root</code> with a module-specific root path.</li>
<li><code>LaminasSkeletonModule\Controller</code> with <code>&lt;YourModuleName&gt;\Controller</code>.</li>
</ul>
</blockquote>
<p>Additionally, we need to tell the application we have a controller:</p>
<pre><code class="php">// module.config.php
return [
    'controllers' =&gt; [
        'invokables' =&gt; [
            '&lt;module-namespace&gt;\Controller\Index' =&gt; '&lt;module-namespace&gt;\Controller\IndexController',
            // Do similar for each other controller in your module
        ],
    ],
   // ... other configuration ...
];
</code></pre>

<blockquote>
<h3 id="controller-services">Controller services</h3>
<p>We inform the application about controllers we expect to have in the
application. This is to prevent somebody requesting any service the
<code>ServiceManager</code> knows about in an attempt to break the application. The
dispatcher uses a special, scoped container that will only pull controllers
that are specifically registered with it, either as invokable classes or via
factories.</p>
</blockquote>
<p>Open your <code>config/module.config.php</code> file, and modify it to add to the "routes"
and "controller" parameters so it reads as follows:</p>
<pre><code class="php">return [
    'router' =&gt; [
        'routes' =&gt; [
            '&lt;module name&gt;-hello-world' =&gt; [
                'type' =&gt; 'Literal',
                    'options' =&gt; [
                    'route' =&gt; '/hello/world',
                    'defaults' =&gt; [
                        'controller' =&gt; '&lt;module name&gt;\Controller\Hello',
                        'action'     =&gt; 'world',
                    ],
                ],
            ],
        ],
    ],
    'controllers' =&gt; [
        'invokables' =&gt; [
            '&lt;module-namespace&gt;\Controller\Hello' =&gt; '&lt;module-namespace&gt;\Controller\HelloController',
        ],
    ],
    // ... other configuration ...
];
</code></pre>

<h2 id="tell-the-application-about-our-module">Tell the Application About our Module</h2>
<p>One problem: we haven't told our application about our new module!</p>
<p>By default, modules are not utilized unless we tell the module manager about them.
As such, we need to notify the application about them.</p>
<p>Remember the <code>config/application.config.php</code> file? Let's modify it to add our
new module. Once done, it should read as follows:</p>
<pre><code class="php">&lt;?php
return [
    'modules' =&gt; [
        'Application',
        '&lt;module-namespace&gt;',
    ],
    // ... other configuration ...
];
</code></pre>

<p>Replace <code>&lt;module-namespace&gt;</code> with the namespace of your module.</p>
<h2 id="test-it-out">Test it Out!</h2>
<p>Now we can test things out! Create a new vhost pointing its document root to the <code>public</code> directory
of your application, and fire it up in a browser. You should see the default homepage template of
<a href="https://github.com/laminas/laminas-mvc-skeleton">laminas-mvc-skeleton</a>.</p>
<p>Now alter the location in your URL to append the path "/hello/world", and load the page. You should
now get the following content:</p>
<pre><code class="html">&lt;h1&gt;Greetings!&lt;/h1&gt;

&lt;p&gt;You said &quot;foo&quot;.&lt;/p&gt;
</code></pre>

<p>Now alter the location to append "?message=bar" and load the page. You should now get:</p>
<pre><code class="html">&lt;h1&gt;Greetings!&lt;/h1&gt;

&lt;p&gt;You said &quot;bar&quot;.&lt;/p&gt;
</code></pre>

<p>Congratulations! You've created your first Laminas MVC module!</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <div class="table-responsive"><table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
