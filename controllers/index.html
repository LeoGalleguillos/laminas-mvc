<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Available Controllers - laminas-mvc</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">laminas-mvc</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../intro/" class="nav-link">Introduction</a>
                            </li>
                            <li class="navitem">
                                <a href="../quick-start/" class="nav-link">Quick Start</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../services/" class="dropdown-item">Default Services</a>
</li>
                                    
<li>
    <a href="../routing/" class="dropdown-item">Routing</a>
</li>
                                    
<li>
    <a href="../mvc-event/" class="dropdown-item">The MVC Event</a>
</li>
                                    
<li>
    <a href="../send-response-event/" class="dropdown-item">The SendResponse Event</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Available Controllers</a>
</li>
                                    
<li>
    <a href="../plugins/" class="dropdown-item">Controller Plugins</a>
</li>
                                    
<li>
    <a href="../examples/" class="dropdown-item">Examples</a>
</li>
                                    
<li>
    <a href="../middleware/" class="dropdown-item">Dispatching PSR-7 Middleware</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Migration</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../migration/" class="dropdown-item">Migration Overview</a>
</li>
            
<li>
    <a href="../migration/to-v2-7/" class="dropdown-item">v2.X to v2.7</a>
</li>
            
<li>
    <a href="../migration/to-v3-0/" class="dropdown-item">v2.X to v3.0</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Cookbook <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../cookbook/automating-controller-factories/" class="dropdown-item">Automating controller factories</a>
</li>
                                    
<li>
    <a href="../cookbook/middleware-in-listeners/" class="dropdown-item">Using middleware within event listeners</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../send-response-event/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../plugins/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/laminas/laminas-mvc/edit/master/docs/controllers.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#available-controllers" class="nav-link">Available Controllers</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#common-interfaces-used-with-controllers" class="nav-link">Common Interfaces Used With Controllers</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#abstractactioncontroller" class="nav-link">AbstractActionController</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#abstractrestfulcontroller" class="nav-link">AbstractRestfulController</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#abstractconsolecontroller" class="nav-link">AbstractConsoleController</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="available-controllers">Available Controllers</h1>
<p>Controllers in laminas-mvc are objects implementing <code>Laminas\Stdlib\DispatchableInterface</code>.
That interface describes a single method:</p>
<pre><code class="php">use Laminas\Stdlib\DispatchableInterface;
use Laminas\Stdlib\RequestInterface as Request;
use Laminas\Stdlib\ResponseInterface as Response;

class Foo implements DispatchableInterface
{
    public function dispatch(Request $request, Response $response = null)
    {
        // ... do something, and preferably return a Response ...
    }
}
</code></pre>

<p>While the pattern is straight-forward, chances are you don't want to implement
custom dispatch logic for every controller, particularly as it's not unusual or
uncommon for a single controller to handle several related types of requests.</p>
<p>To provide convenience, laminas-mvc also defines several interfaces that, when
implemented, can provide controllers with additional capabilities.</p>
<h2 id="common-interfaces-used-with-controllers">Common Interfaces Used With Controllers</h2>
<h3 id="injectapplicationevent">InjectApplicationEvent</h3>
<p>The <code>Laminas\Mvc\InjectApplicationEventInterface</code> hints to the <code>Application</code>
instance that it should inject its <code>MvcEvent</code> into the controller itself. Why
would this be useful?</p>
<p>Recall that the <code>MvcEvent</code> composes a number of objects: the <code>Request</code> and
<code>Response</code>, naturally, but also the router, the route matches (a <code>RouteMatch</code>
instance), and potentially the "result" of dispatching.</p>
<p>A controller that has the <code>MvcEvent</code> injected, then, can retrieve or inject
these. As an example:</p>
<pre><code class="php">$matches = $this-&gt;getEvent()-&gt;getRouteMatch();
$id      = $matches-&gt;getParam('id', false);
if (! $id) {
    $response = $this-&gt;getResponse();
    $response-&gt;setStatusCode(500);
    $this-&gt;getEvent()-&gt;setResult('Invalid identifier; cannot complete request');
    return;
}
</code></pre>

<p>The <code>InjectApplicationEventInterface</code> defines two methods:</p>
<pre><code class="php">public function setEvent(Laminas\EventManager\EventInterface $event);
public function getEvent();
</code></pre>

<h3 id="servicelocatoraware">ServiceLocatorAware</h3>
<p>In most cases, you should define your controllers such that dependencies are
injected by the application's <code>ServiceManager</code>, via either constructor arguments
or setter methods.</p>
<p>However, occasionally you may have objects you wish to use in your controller
that are only valid for certain code paths. Examples include forms, paginators,
navigation, etc. In these cases, you may decide that it doesn't make sense to
inject those objects every time the controller is used.</p>
<p>The <code>ServiceLocatorAwareInterface</code> interface hints to the <code>ServiceManager</code> that it should inject
itself into the controller. It defines two simple methods:</p>
<pre><code class="php">use Laminas\ServiceManager\ServiceLocatorInterface;
use Laminas\ServiceManager\ServiceLocatorAwareInterface;

public function setServiceLocator(ServiceLocatorInterface $serviceLocator);
public function getServiceLocator();
</code></pre>

<blockquote>
<h4 id="servicelocatorinterface-is-deprecated">ServiceLocatorInterface is deprecated</h4>
<p><code>ServiceLocatorAwareInterface</code> <a href="http://docs.laminas.dev/laminas-servicemanager/migration/#miscellaneous-interfaces-traits-and-classes">was removed from laminas-servicemanager v3.0</a>,
and, as such, starting in laminas-mvc 2.7.0, the <code>AbstractController</code>
implementation no longer implements the interface, though it implements the
methods the interface defines; this allows forwards compatibility with
laminas-servicemanager v3.</p>
<p>However, also starting with the laminas-mvc 2.7.0 release, <code>ServiceLocatorAwareInterface</code>
usage is deprecated. We recommend injecting dependencies explicitly instead of
pulling them from a composed <code>ServiceManager</code> instance.</p>
<p>In cases where an object will not be used in all code paths, we recommend
splitting into discrete controllers, or using <a href="http://docs.laminas.dev/laminas-servicemanager/lazy-services/">lazy services</a>.</p>
</blockquote>
<h3 id="eventmanageraware">EventManagerAware</h3>
<p>Typically, it's nice to be able to tie into a controller's workflow without
needing to extend it or hardcode behavior into it. The solution for this is to
use the <code>EventManager</code>.</p>
<p>You can hint to the <code>ServiceManager</code> that you want an <code>EventManager</code> injected by
implementing the interface <code>EventManagerAwareInterface</code>, which tells the
<code>ServiceManager</code> to inject an <code>EventManager</code>.</p>
<p>To do this, you define two methods. The first, a setter, should also set any
<code>SharedEventManager</code> identifiers you want to listen on, and the second, a getter,
should return the composed <code>EventManager</code> instance.</p>
<pre><code class="php">use Laminas\EventManager\EventManagerAwareInterface;
use Laminas\EventManager\EventManagerInterface;

public function setEventManager(EventManagerInterface $events);
public function getEventManager();
</code></pre>

<h3 id="controller-plugins">Controller Plugins</h3>
<p>Code re-use is a common goal for developers. Another common goal is convenience.
However, this is often difficult to achieve cleanly in abstract, general
systems.</p>
<p>Within your controllers, you'll often find yourself repeating tasks from one
controller to another.  Some common examples:</p>
<ul>
<li>Generating URLs.</li>
<li>Redirecting.</li>
<li>Setting and retrieving flash messages (self-expiring session messages).</li>
<li>Invoking and dispatching additional controllers.</li>
</ul>
<p>To facilitate these actions while also making them available to alternate
controller implementations, we've created a <code>PluginManager</code> implementation for
the controller layer, <code>Laminas\Mvc\Controller\PluginManager</code>, building on the
<code>Laminas\ServiceManager\AbstractPluginManager</code> functionality. To utilize it,
implement the <code>setPluginManager(PluginManager $plugins)</code> method, and set up your
code to use the controller-specific implementation by default:</p>
<pre><code class="php">use Laminas\Mvc\Controller\PluginManager;

public function setPluginManager(PluginManager $plugins)
{
    $this-&gt;plugins = $plugins;
    $this-&gt;plugins-&gt;setController($this);

    return $this;
}

public function getPluginManager()
{
    if (!$this-&gt;plugins) {
        $this-&gt;setPluginManager(new PluginManager());
    }

    return $this-&gt;plugins;
}

public function plugin($name, array $options = null)
{
    return $this-&gt;getPluginManager()-&gt;get($name, $options);
}
</code></pre>

<h2 id="abstractactioncontroller">AbstractActionController</h2>
<p>Implementing each of the above interfaces is a lesson in redundancy; you won't
often want to do it.  As such, we've developed abstract, base controllers you
can extend to get started.</p>
<p>The first is <code>Laminas\Mvc\Controller\AbstractActionController</code>. This controller
implements each of the above interfaces, and uses the following assumptions:</p>
<ul>
<li>An "action" parameter is expected in the <code>RouteMatch</code> object composed in the
  attached <code>MvcEvent</code>.  If none is found, a <code>notFoundAction()</code> is invoked.</li>
<li>The "action" parameter is converted to a camelCased format and appended with
  the word "Action" to create a method name. As examples: "foo" maps to
  <code>fooAction</code>, "foo-bar" or "foo.bar" or "foo_bar" to <code>fooBarAction</code>. The
  controller then checks to see if that method exists. If not, the
  <code>notFoundAction()</code> method is invoked; otherwise, the discovered method is
  called.</li>
<li>The results of executing the given action method are injected into the
  <code>MvcEvent</code>'s "result" property (via <code>setResult()</code>, and accessible via
  <code>getResult()</code>).</li>
</ul>
<p>Essentially, a route mapping to an <code>AbstractActionController</code> needs to return
both the "controller" and "action" keys in its matches.</p>
<p>Creation of action controllers looks like the following example:</p>
<pre><code class="php">namespace Foo\Controller;

use Laminas\Mvc\Controller\AbstractActionController;

class BarController extends AbstractActionController
{
    public function bazAction()
    {
        return ['title' =&gt; __METHOD__];
    }

    public function batAction()
    {
        return ['title' =&gt; __METHOD__];
    }
}
</code></pre>

<h3 id="interfaces-and-collaborators">Interfaces and Collaborators</h3>
<p><code>AbstractActionController</code> implements each of the following interfaces:</p>
<ul>
<li><code>Laminas\Stdlib\DispatchableInterface</code></li>
<li><code>Laminas\Mvc\InjectApplicationEventInterface</code></li>
<li><code>Laminas\ServiceManager\ServiceLocatorAwareInterface</code> (starting with laminas-mvc
  2.7.0, only the methods defined by the interface, not the interface itself)</li>
<li><code>Laminas\EventManager\EventManagerAwareInterface</code></li>
</ul>
<p>The composed <code>EventManager</code> will be configured to listen on the following contexts:</p>
<ul>
<li><code>Laminas\Stdlib\DispatchableInterface</code></li>
<li><code>Laminas\Mvc\Controller\AbstractActionController</code></li>
<li><code>Laminas\Mvc\Controller\AbstractController</code></li>
</ul>
<p>Additionally, if you extend the class, it will listen on the name of the
extending class.</p>
<h2 id="abstractrestfulcontroller">AbstractRestfulController</h2>
<p><code>Laminas\Mvc\Controller\AbstractRestfulController</code> provides a native RESTful
implementation that maps HTTP request methods to controller methods, using the
following matrix:</p>
<ul>
<li><strong>GET</strong> maps to either <code>get()</code> or <code>getList()</code>, depending on whether or not an
  "id" parameter is found in the route matches. If one is, it is passed as an
  argument to <code>get()</code>; if not, <code>getList()</code> is invoked. In the former case, you
  should provide a representation of the given entity with that identification;
  in the latter, you should provide a list of entities.</li>
<li><strong>POST</strong> maps to <code>create()</code>. That method expects a <code>$data</code> argument, usually
  the <code>$_POST</code> superglobal array. The data should be used to create a new
  entity, and the response should typically be an HTTP 201 response with the
  Location header indicating the URI of the newly created entity and the
  response body providing the representation.</li>
<li><strong>PUT</strong> maps to <code>update()</code>, and requires that an "id" parameter exists in the
  route matches; that value is passed as an argument to the method. It should
  attempt to update the given entity, and, if successful, return either a 200 or
  202 response status, as well as the representation of the entity.</li>
<li><strong>DELETE</strong> maps to <code>delete()</code>, and requires that an "id" parameter exists in
  the route matches; that value is passed as an argument to the method. It
  should attempt to delete the given entity, and, if successful, return either a
  200 or 204 response status.</li>
</ul>
<p>Additionally, you can map "action" methods to the <code>AbstractRestfulController</code>,
just as you would in the <code>AbstractActionController</code>; these methods will be
suffixed with "Action", differentiating them from the RESTful methods listed
above. This allows you to perform such actions as providing forms used to submit
to the various RESTful methods, or to add RPC methods to your RESTful API.</p>
<h3 id="interfaces-and-collaborators_1">Interfaces and Collaborators</h3>
<p><code>AbstractRestfulController</code> implements each of the following interfaces:</p>
<ul>
<li><code>Laminas\Stdlib\DispatchableInterface</code></li>
<li><code>Laminas\Mvc\InjectApplicationEventInterface</code></li>
<li><code>Laminas\ServiceManager\ServiceLocatorAwareInterface</code> (starting with laminas-mvc
  2.7.0, only the methods defined by the interface, not the interface itself)</li>
<li><code>Laminas\EventManager\EventManagerAwareInterface</code></li>
</ul>
<p>The composed <code>EventManager</code> will be configured to listen on the following contexts:</p>
<ul>
<li><code>Laminas\Stdlib\DispatchableInterface</code></li>
<li><code>Laminas\Mvc\Controller\AbstractRestfulController</code></li>
<li><code>Laminas\Mvc\Controller\AbstractController</code></li>
</ul>
<p>Additionally, if you extend the class, it will listen on the name of the
extending class.</p>
<h2 id="abstractconsolecontroller">AbstractConsoleController</h2>
<blockquote>
<h3 id="installation-requirements">Installation Requirements</h3>
<p>For version 3, the integration component
<a href="https://docs.laminas.dev/laminas-mvc-console/">laminas-mvc-console</a> must be
installed. It can be done via Composer:</p>
<p><code>bash
composer require laminas/laminas-mvc-console</code></p>
<p>If you are not using the component installer, you will need to
<a href="https://docs.laminas.dev/laminas-mvc-console/#installation">add this component as a module</a>.</p>
</blockquote>
<p><code>Laminas\Mvc\Console\Controller\AbstractConsoleController</code> extends from <a href="#abstractactioncontroller">AbstractActionController</a>
and provides the following functionality:</p>
<ul>
<li>The method <code>setConsole(Laminas\Console\Adapter\AdapterInterface $console)</code> allows
  injecting a console adapter representing the current console environment. By
  default, the <code>ControllerManager</code> will inject this for you as part of
  controller instantiation.</li>
<li>The method <code>getConsole()</code> allows you to retrieve the current console adapter
  instance, allowing you to retrieve console capabilities and generate console
  output.</li>
<li>The <code>dispatch()</code> method will throw an exception if invoked in a non-console
  environment, ensuring that you do not need to do any checks within your action
  methods for the environment.</li>
</ul>
<h3 id="interfaces-and-collaborators_2">Interfaces and Collaborators</h3>
<p><code>AbstractRestfulController</code> implements each of the following interfaces:</p>
<ul>
<li><code>Laminas\Stdlib\DispatchableInterface</code></li>
<li><code>Laminas\Mvc\InjectApplicationEventInterface</code></li>
<li><code>Laminas\ServiceManager\ServiceLocatorAwareInterface</code> (starting with laminas-mvc
  2.7.0, only the methods defined by the interface, not the interface itself)</li>
<li><code>Laminas\EventManager\EventManagerAwareInterface</code></li>
</ul>
<p>The composed <code>EventManager</code> will be configured to listen on the following contexts:</p>
<ul>
<li><code>Laminas\Stdlib\DispatchableInterface</code></li>
<li><code>Laminas\Mvc\Console\Controller\AbstractConsoleController</code></li>
<li><code>Laminas\Mvc\Controller\AbstractActionController</code></li>
<li><code>Laminas\Mvc\Controller\AbstractController</code></li>
</ul>
<p>Additionally, if you extend the class, it will listen on the name of the
extending class.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <div class="table-responsive"><table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
